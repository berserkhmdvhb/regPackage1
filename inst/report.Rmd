---
title: "Car Insurance Claims Dataset Classification - Report"
author: "Hamed Vaheb"
#1date: "09 Jan 2021"
output:
  html_document:
    number_sections: yes
    toc: yes
    code_folding: hide
    theme: readable
    highlight: haddock
  pdf_document:
    toc: yes
---



```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(regPackage1)
library(dplyr)
library(janitor)
library(caret)
library(tidymodels)
library(visdat)
```
# Introduction
This report is dedicated to project of a workshop of master of data science at University of Luxembourg, I built the [`regPackage1`](https://github.com/berserkhmdvhb/regPackage1). 
You can install this package by first installing the [devtools](https://www.r-project.org/nosvn/pandoc/devtools.html) package and then using the following syntax:

`devtools::install_github("https://github.com/berserkhmdvhb/regPackage1")`

You can explore the documentation of package I provided with 

`help(package="regPackage1")`

Also, this report is accessible as vignette of the package, which can be accessed with

`vignette(package = "regPackage1")`

(Note: I just made a meta-reference)


Note that all functions of the package are suffixed with `hmd`.

## Import Data
To provide a test case on a dataset with discrete target variable, I used the the [car insurance data](https://www.kaggle.com/datasets/sagnik1511/car-insurance-data).

 
## Load Dataset

The dataset is embedded in the package, therefore by simply running the following commands one can load and display the dataset.
. It can be used by the following syntax:

`data(car_insurance_data)`




```{r}
data(car_insurance_data)

dplyr::glimpse(car_insurance_data)
```


Summary of statistical properties of columns are provided in the following:

```{r}
summary(car_insurance_data)
```




# Preprocess
Before feeding data to the model, various preprocessing stages are performed in the following subsections:

## Clean Column Names

```{r}
df <- janitor::clean_names(car_insurance_data)

names(df)
```

## Categorical Columns
We need to factorise the categorical columns, which can be done by merely inputting columns intended to be converted in `cat_cols` in the `prepare_hmd` function. Before doing that, we report and visualise the nature of categorical data and their frequency in the dataset

```{r}
categoricals_print_hmd(df)
```

```{r warning=FALSE}
vis_dat(df)
```

```{r}
df <- categoricals_hmd(df) 
dplyr::glimpse(df)
```


```{r}
vis_dat(df)
```


## Missing Data



```{r}
df[is.na(df) | df=="Inf"] = NA
vis_miss(df, sort_miss = TRUE)
```


```{r}
is.na(df |> select("credit_score","annual_mileage")) %>% colSums()
## Classification Models
```
## Balance of Target Classes

As imbalance of target classes affect predictions, the frequency of each class in the `outcome` column is visualized:


```{r}
as.numeric(df$outcome) |> hist()
```
